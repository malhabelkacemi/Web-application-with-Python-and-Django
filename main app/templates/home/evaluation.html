{% extends "layouts/base.html" %}

{% block title %} Charts {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

	<div class="content">
		<div class="page-inner">
			<h4 class="page-title">Chart.js</h4>
			<div class="page-category">Simple yet flexible JavaScript charting for designers & developers. Please checkout their <a href="https://www.chartjs.org/" target="_blank">full documentation</a>.</div>
			<div class="row">
                {% for i in var%}
				<div class="col-md-6">
					<div class="card">
						<div class="card-header">
							<div class="card-title">Line Chart</div>
						</div>
						<div class="card-body">
							<div class="chart-container">
								<canvas id="mychart{{i}}"></canvas>
							</div>
						</div>
					</div>
				</div>
                {% endfor %}
            </div>
		</div>
	</div>

{% endblock content %}

{% block javascripts %}
    <script>
        iter = {{ test|length }};
		li = {{ test|safe }};
		console.log(li);
		lil = li.join().split(',')
		console.log(lil);
        for ( var i = 0; i<iter; i++){
            eval('ctx'+i+'= document.getElementById(\'mychart'+i+'\').getContext(\'2d\')');
            
            eval('chart'+i+'= new Chart(ctx'+i+', {type: \'line\',data: {labels: li.join().split(\',\'), datasets: [{label: "Number of costummers",borderColor: "#1d7af3",pointBorderColor: "#FFF",pointBackgroundColor: "#1d7af3",pointBorderWidth: 2,pointHoverRadius: 4,pointHoverBorderWidth: 1,pointRadius: 4,backgroundColor: \'transparent\',fill: true,borderWidth: 2,data: {{ test|safe }}}]},options : { responsive: true,maintainAspectRatio: false,legend: {position: \'bottom\',labels : {padding: 10,fontColor: \'#1d7af3\',}},tooltips: {bodySpacing: 4,mode:"nearest",intersect: 0,position:"nearest",xPadding:10,yPadding:10,caretPadding:10},layout:{padding:{left:15,right:15,top:15,bottom:15}}}})');
        }



    </script>

{% endblock javascripts %}